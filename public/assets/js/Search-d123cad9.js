import{i as e}from"./web.dom-collections.iterator-c5b25a0f.js";import{f as t,w as r,d as n,_ as a,y as s,C as i,g as o,i as c,r as u,J as l,K as h,L as d,b as f,G as p,o as v,e as g,M as m,N as w,m as y,v as b,h as L,O as R,P as U,Q as k,R as S,S as x,T as P,U as C,B as E}from"./ui.mjs";import{a as j}from"./array-sort-a36e91b7.js";import{l as F}from"./LoadExternalScript-1424c4ca.js";import{C as I}from"./Config-49f58306.js";import"./_rollupPluginBabelHelpers-56fbbc65.js";var A=t,_=r("iterator"),q=!A((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[_]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),O=n,D=a,Q=s,B=y,G=i,T=u,z=q,H=n,N=function(e,t,r){for(var n in t)O(e,n,t[n],r);return e},J=o,K=e,M=b,V=l,W=c,X=L,Y=h,Z=d,$=R,ee=f,te=p,re=v,ne=g,ae=m,se=U,ie=w,oe=j,ce=r("iterator"),ue=M.set,le=M.getterFor("URLSearchParams"),he=M.getterFor("URLSearchParamsIterator"),de=Object.getOwnPropertyDescriptor,fe=function(e){if(!T)return Q[e];var t=de(Q,e);return t&&t.value},pe=fe("fetch"),ve=fe("Request"),ge=fe("Headers"),me=ve&&ve.prototype,we=ge&&ge.prototype,ye=Q.RegExp,be=Q.TypeError,Le=Q.decodeURIComponent,Re=Q.encodeURIComponent,Ue=G("".charAt),ke=G([].join),Se=G([].push),xe=G("".replace),Pe=G([].shift),Ce=G([].splice),Ee=G("".split),je=G("".slice),Fe=/\+/g,Ie=Array(4),Ae=function(e){return Ie[e-1]||(Ie[e-1]=ye("((?:%[\\da-f]{2}){"+e+"})","gi"))},_e=function(e){try{return Le(e)}catch(t){return e}},qe=function(e){var t=xe(e,Fe," "),r=4;try{return Le(t)}catch(e){for(;r;)t=xe(t,Ae(r--),_e);return t}},Oe=/[!'()~]|%20/g,De={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Qe=function(e){return De[e]},Be=function(e){return xe(Re(e),Oe,Qe)},Ge=K((function(e,t){ue(this,{type:"URLSearchParamsIterator",iterator:ae(le(e).entries),kind:t})}),"Iterator",(function(){var e=he(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),!0),Te=function(e){this.entries=[],this.url=null,void 0!==e&&(ee(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Ue(e,0)?je(e,1):e:te(e)))};Te.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,a,s,i,o,c=se(e);if(c)for(r=(t=ae(e,c)).next;!(n=B(r,t)).done;){if(s=(a=ae($(n.value))).next,(i=B(s,a)).done||(o=B(s,a)).done||!B(s,a).done)throw be("Expected sequence with length 2");Se(this.entries,{key:te(i.value),value:te(o.value)})}else for(var u in e)X(e,u)&&Se(this.entries,{key:u,value:te(e[u])})},parseQuery:function(e){if(e)for(var t,r,n=Ee(e,"&"),a=0;a<n.length;)(t=n[a++]).length&&(r=Ee(t,"="),Se(this.entries,{key:qe(Pe(r)),value:qe(ke(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],Se(r,Be(e.key)+"="+Be(e.value));return ke(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ze=function(){V(this,He);var e=arguments.length>0?arguments[0]:void 0;ue(this,new Te(e))},He=ze.prototype;if(N(He,{append:function(e,t){ie(arguments.length,2);var r=le(this);Se(r.entries,{key:te(e),value:te(t)}),r.updateURL()},delete:function(e){ie(arguments.length,1);for(var t=le(this),r=t.entries,n=te(e),a=0;a<r.length;)r[a].key===n?Ce(r,a,1):a++;t.updateURL()},get:function(e){ie(arguments.length,1);for(var t=le(this).entries,r=te(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){ie(arguments.length,1);for(var t=le(this).entries,r=te(e),n=[],a=0;a<t.length;a++)t[a].key===r&&Se(n,t[a].value);return n},has:function(e){ie(arguments.length,1);for(var t=le(this).entries,r=te(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){ie(arguments.length,1);for(var r,n=le(this),a=n.entries,s=!1,i=te(e),o=te(t),c=0;c<a.length;c++)(r=a[c]).key===i&&(s?Ce(a,c--,1):(s=!0,r.value=o));s||Se(a,{key:i,value:o}),n.updateURL()},sort:function(){var e=le(this);oe(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=le(this).entries,n=Y(e,arguments.length>1?arguments[1]:void 0),a=0;a<r.length;)n((t=r[a++]).value,t.key,this)},keys:function(){return new Ge(this,"keys")},values:function(){return new Ge(this,"values")},entries:function(){return new Ge(this,"entries")}},{enumerable:!0}),H(He,ce,He.entries,{name:"entries"}),H(He,"toString",(function(){return le(this).serialize()}),{enumerable:!0}),J(ze,"URLSearchParams"),D({global:!0,constructor:!0,forced:!z},{URLSearchParams:ze}),!z&&W(ge)){var Ne=G(we.has),Je=G(we.set),Ke=function(e){if(ee(e)){var t,r=e.body;if("URLSearchParams"===Z(r))return t=e.headers?new ge(e.headers):new ge,Ne(t,"content-type")||Je(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),re(e,{body:ne(0,te(r)),headers:ne(0,t)})}return e};if(W(pe)&&D({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return pe(e,arguments.length>1?Ke(arguments[1]):{})}}),W(ve)){var Me=function(e){return V(this,me),new ve(e,arguments.length>1?Ke(arguments[1]):{})};me.constructor=Me,Me.prototype=me,D({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Me})}}var Ve=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},We=y,Xe=R,Ye=S,Ze=x,$e=Ve,et=p,tt=P,rt=C;k("search",(function(e,t,r){return[function(t){var r=Ze(this),n=Ye(t)?void 0:tt(t,e);return n?We(n,t,r):new RegExp(t)[e](et(r))},function(e){var n=Xe(this),a=et(e),s=r(t,n,a);if(s.done)return s.value;var i=n.lastIndex;$e(i,0)||(n.lastIndex=0);var o=rt(n,a);return $e(n.lastIndex,i)||(n.lastIndex=i),null===o?-1:o.index}]}));var nt=["site"];class at extends E{init(e){return this.el=e,window.__gcse||(window.__gcse={}),window.__gcse={parsetags:"explicit",callback:()=>this.onLoadedCallback()},this.isApiLoaded=!1,this.apiLoadedCb=()=>{},this.prefillForm(),this.on("submit",this.onSubmit),this.on("change",'input[name="site"]',this.onSiteFilterChange),this}prefillForm(){[...new URLSearchParams(window.location.search).entries()].forEach((e=>{var[t,r]=e;this.fillElement(document.querySelectorAll('[name="'+t+'"]'),decodeURIComponent(r).replace(/\+/g," "))}))}fillElement(e,t){e.forEach((e=>{["checkbox","radio"].includes(e.type)?e.value===t&&(e.checked=!0):e.value=t,e.dispatchEvent(new Event("change",{bubbles:!0}))}))}onSiteFilterChange(){this.search()}onSubmit(e){e.preventDefault();var t=new URLSearchParams(new FormData(e.target));[...t.entries()].forEach((e=>{var[r,n]=e;n&&!nt.includes(r)||t.delete(r)})),window.history.replaceState({},null,decodeURIComponent("".concat(window.location.pathname,"?").concat(t))),this.search()}onLoadedCallback(){window.google.search.cse.element.render({div:"cse-searchresults",tag:"searchresults-only",gname:"cse-searchresults",attributes:{queryParameterName:"none"}}),this.isApiLoaded||(this.isApiLoaded=!0,this.apiLoadedCb()),this.search()}search(){var e=new URLSearchParams(window.location.search).get("q"),t=this.getSiteFilter(),r=t?"site:".concat(t):void 0;if(F("//cse.google.com/cse.js?cx=".concat(I.get("google.cse.key"))),e){var n=()=>{window.google.search.cse.element.getElement("cse-searchresults").execute([e,r].join(" "))};this.isApiLoaded?n():this.apiLoadedCb=n}}getSiteFilter(){return new FormData(this.el).get("site")}}function st(){return new at}export{at as Search,st as default};
