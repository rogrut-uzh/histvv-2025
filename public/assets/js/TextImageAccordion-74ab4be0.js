import{B as t,c as e}from"./ui.mjs";var i=0;class n extends t{constructor(){super()}init(t){return this.el=t,this.$el=e(this.el),this.id="text-image-accordion_".concat(i++),this.$hiddenContent=this.$el.next(),this.$hiddenContent.attr("id",this.id),this.addHiddenButton(),this.measure(),this.hideContent(),this.on(this.$hiddenButton[0],"click",this.toggle),this.on(window,"resize",this.measure),this.checkImages(),this}addHiddenButton(){this.$hiddenButton=e("<button class='TextImage--accordionButton' type='button' aria-controls='".concat(this.id,"' aria-expanded='false'></button>")),this.$el.wrap(this.$hiddenButton)}measure(){var t,e=null===(t=this.$hiddenContent[0])||void 0===t?void 0:t.scrollHeight,i=200*e/400;this.$hiddenContent[0].style.setProperty("--text-image-accordion_max-height","".concat(e,"px")),this.$hiddenContent[0].style.setProperty("--text-image-accordion_transition-duration","".concat(i,"ms"))}toggle(){this.isContentHidden()?this.showContent():this.hideContent()}hideContent(){this.$el.removeClass("is-open"),this.$hiddenButton.attr("aria-expanded","false"),this.$hiddenContent.attr("data-text-image-accordion-hidden","true")}showContent(){this.$el.addClass("is-open"),this.$hiddenButton.attr("aria-expanded","true"),this.$hiddenContent.attr("data-text-image-accordion-hidden","false")}isContentHidden(){return"true"===this.$hiddenContent.attr("data-text-image-accordion-hidden")}checkImages(){this.$hiddenContent.find("img").each(((t,e)=>{null!=e&&e.complete||e.addEventListener("load",(()=>this.measure()),{once:!0})}))}}export{n as default};
