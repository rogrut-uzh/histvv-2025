import{p as t,a as e}from"./PreventBodyScroll-9d734936.js";import{B as s,c as i,V as r,W as o}from"./ui.mjs";import{i as a}from"./IsClickOutside-21bf1e40.js";import{c as n}from"./popper-f938939c.js";var c=i("html");class l extends s{constructor(){super()}init(t){return this.el=t,this.$el=i(this.el),this.container=this.el.querySelector(".js-Breadcrumb--list"),this.$triggers=this.$el.find(".js-Breadcrumb--btn"),this.$flyouts=this.$el.find(".js-Breadcrumb--flyout"),this.$activeTrigger=i(),this.$activeFlyout=i(),this.$el.append(this.$flyouts),this.on("click",".js-Breadcrumb--btn",this.toggleNav),this.on("click",".js-Breadcrumb--close",this.onCloseBtnClick),this.boundDocumentClick=function(t){this.isOpen()&&a(this.el,t.target)&&this.hide()}.bind(this),this.scrollToEnd(),c.find(".ContentArea .RSSLink").length&&c.addClass("has-RSSLink"),r.on("MainNav.open",(()=>{this.hide()})),this}isOpen(){return c.hasClass("breadcrumb-open")}bindOpenListeners(){document.body.addEventListener("click",this.boundDocumentClick)}unbindOpenListeners(){document.body.removeEventListener("click",this.boundDocumentClick)}toggleNav(t){this.$activeTrigger=i(t.target.closest(".js-Breadcrumb--btn")),this.isOpen()?this.hide():this.show()}scrollToEnd(){this.container.scrollLeft=this.container.scrollWidth,this.$el.addClass("is-setup")}show(){var e=this.$activeTrigger.attr("aria-controls");this.$activeFlyout=this.$flyouts.filter("#".concat(e)),c.addClass("breadcrumb-open"),this.$activeTrigger.attr("aria-expanded","true"),this.focusTrapRelease=o.keepFocus(this.$activeFlyout),this.bindOpenListeners(),this.$activeFlyout.addClass("is-open"),this.popperInstance=n(this.$activeTrigger[0],this.$activeFlyout[0],{strategy:"fixed",placement:"bottom-start",modifiers:[{name:"flip",options:{fallbackPlacements:["bottom-start","bottom-end"]}},{name:"computeStyles",options:{gpuAcceleration:!1}}]}),t(),this.$activeTrigger[0].scrollIntoView({block:"end",inline:"nearest",behavior:"smooth"}),setTimeout((()=>{o.focusFirst(this.$activeFlyout,"a")}),100)}hide(){c.hasClass("breadcrumb-open")&&(c.removeClass("breadcrumb-open"),this.$triggers.attr("aria-expanded","false"),this.$flyouts.removeClass("is-open"),this.focusTrapRelease&&this.focusTrapRelease(),this.popperInstance.destroy(),this.unbindOpenListeners(),e())}onCloseBtnClick(){this.hide(),this.$activeTrigger[0].focus()}}export{l as default};
